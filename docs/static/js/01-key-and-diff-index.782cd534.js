(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"./01.key_and_diff/index.mdx":function(e,n,a){"use strict";a.r(n);var t=a("./node_modules/react/index.js"),r=a.n(t),o=a("./node_modules/@mdx-js/tag/dist/index.js"),c=a("./node_modules/docz/dist/index.m.js");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function p(e,n){return!n||"object"!==m(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var s=0,d=function(e){function n(e){var a;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(a=p(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={name:"create   ".concat(s++)},a}var a,o,c;return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}(n,t["Component"]),a=n,(o=[{key:"componentWillReceiveProps",value:function(){this.setState({name:"update ".concat(s++)})}},{key:"render",value:function(){return r.a.createElement("div",null,"Component",this.props.name," ",this.state.name)}}])&&l(a.prototype,o),c&&l(a,c),n}();function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function E(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function h(e,n,a){return n&&E(e.prototype,n),a&&E(e,a),e}function y(e,n){return!n||"object"!==u(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function g(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&k(e,n)}function k(e,n){return(k=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}d.__docgenInfo={description:"",methods:[],displayName:"ComponentA"};var D=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u4e0d\u53d8\u4e14\u6bcf\u4e2a child \u4e0d\u5177\u6709 key \u5c5e\u6027"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A, B, C]",r.a.createElement("br",null),"pre children: [A, B, C]"),r.a.createElement(d,{name:"A"}),r.a.createElement(d,{name:"B"}),r.a.createElement(d,{name:"C"}))}}]),n}(),C=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u4e0d\u53d8\u4e14\u6bcf\u4e2a child \u4e0d\u5177\u6709 key \u5c5e\u6027\u4e14\u987a\u5e8f\u53d8\u5316"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A, B, C]",r.a.createElement("br",null),"pre children: [A, C, B]"),r.a.createElement(d,{name:"A",key:"A"}),n?r.a.createElement(d,{name:"B"}):r.a.createElement(d,{name:"C"}),n?r.a.createElement(d,{name:"C"}):r.a.createElement(d,{name:"B"}))}}]),n}(),T=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return n?r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u53d8\u5316\u4e14\u6bcf\u4e2a child \u4e0d\u5177\u6709 key \u5c5e\u6027"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A, B, C]",r.a.createElement("br",null),"pre children: [A, C]"),r.a.createElement(d,{name:"A"}),r.a.createElement(d,{name:"B"}),r.a.createElement(d,{name:"C"})):r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u53d8\u5316\u4e14\u6bcf\u4e2a child \u4e0d\u5177\u6709 key \u5c5e\u6027"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A, B, C]",r.a.createElement("br",null),"pre children: [A, C]"),r.a.createElement(d,{name:"A"}),r.a.createElement(d,{name:"C"}))}}]),n}(),M=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return n?r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u53d8\u5316\u4e14\u6bcf\u4e2a child \u5177\u6709 key \u5c5e\u6027"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A@key, B@key, C@key]",r.a.createElement("br",null),"pre children: [A@key, C@key]"),r.a.createElement(d,{name:"A",key:"A"}),r.a.createElement(d,{name:"B",key:"B"}),r.a.createElement(d,{name:"C",key:"C"})):r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u53d8\u5316\u4e14\u6bcf\u4e2a child \u5177\u6709 key \u5c5e\u6027"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A@key, B@key, C@key]",r.a.createElement("br",null),"pre children: [A@key, C@key]"),r.a.createElement(d,{name:"A",key:"A"}),r.a.createElement(d,{name:"C",key:"C"}))}}]),n}(),X=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return r.a.createElement("div",null,r.a.createElement("h4",null,"children \u957f\u5ea6\u4e0d\u53d8\u4e14\u6bcf\u4e2a child \u5177\u6709 key \u5c5e\u6027\u4e14\u6700\u540e\u4e00\u4e2a child \u7ed3\u6784\u53d8\u5316"),r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement("pre",null,"cur children: [A@key, B@key,    C@key ]",r.a.createElement("br",null),"pre children: [A@key, B@key, [ C@key ]]"),r.a.createElement(d,{name:"A",key:"A"}),r.a.createElement(d,{name:"B",key:"B"}),n?[r.a.createElement(d,{name:"C",key:"C"})]:r.a.createElement(d,{name:"C",key:"C"}))}}]),n}(),v=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement(d,{name:"A"}),n?r.a.createElement(d,{name:"C"}):null,n?null:r.a.createElement(d,{name:"C"}),r.a.createElement(d,{name:"B"}))}}]),n}(),b=function(e){function n(e){var a;return f(this,n),(a=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))).state={},a}return g(n,t["Component"]),h(n,[{key:"render",value:function(){var e=this,n=this.state.flag;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return e.setState({flag:!n})}},"\u5237\u65b0"),r.a.createElement(d,{name:"A"}),n?[r.a.createElement(d,{name:"B",key:"B1"}),r.a.createElement(d,{name:"B",key:"B2"})]:[r.a.createElement(d,{name:"B",key:"B2"})],r.a.createElement(d,{name:"C"}))}}]),n}();function N(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}D.__docgenInfo={description:"",methods:[],displayName:"ParentA"},C.__docgenInfo={description:"",methods:[],displayName:"ParentB"},T.__docgenInfo={description:"",methods:[],displayName:"ParentC"},M.__docgenInfo={description:"",methods:[],displayName:"ParentD"},X.__docgenInfo={description:"",methods:[],displayName:"ParentE"},v.__docgenInfo={description:"",methods:[],displayName:"ParentF"},b.__docgenInfo={description:"",methods:[],displayName:"ParentG"};n.default=function(e){var n=e.components,a=N(e,["components"]);return r.a.createElement(o.MDXTag,{name:"wrapper",components:n},r.a.createElement(o.MDXTag,{name:"h1",components:n,props:{id:"key-and-diff"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h1",props:{"aria-hidden":!0,href:"#key-and-diff"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"key and diff"),r.a.createElement(o.MDXTag,{name:"p",components:n},"\u62e3 key \u548c diff \u5f00\u542f react \u6e90\u7801\u5206\u6790\u4e4b\u65c5\uff0c\u5b9e\u5728\u53ea\u662f\u56e0\u4e3a\u4e2a\u4eba\u5bf9\u8fd9\u4e00\u5757\u5370\u8c61\u6bd4\u8f83\u6df1\u523b\uff0c\u4e14\u5176\u672c\u8eab\u6bd4\u8f83\u6709\u610f\u601d\u3002\u672c\u6587\u4ec5\u6d89\u53ca\u5bf9\u5355\u5c42\u7684 diff \u8fc7\u7a0b\u53ca key \u5728\u8fc7\u7a0b\u4e2d\u626e\u6f14\u7684\u89d2\u8272\u8fdb\u884c\u7b80\u7565\u7684\u5206\u6790\uff0c\u5982\u6709\u8c2c\u8bef\uff0c\u70e6\u8bf7\u6307\u6b63\u3002"),r.a.createElement(o.MDXTag,{name:"h2",components:n,props:{id:"\u76f4\u5954\u4e3b\u9898"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#\u76f4\u5954\u4e3b\u9898"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u76f4\u5954\u4e3b\u9898"),r.a.createElement(o.MDXTag,{name:"h3",components:n,props:{id:"\u6570\u636e\u7ed3\u6784\u3010\u4ec5\u8003\u8651-vnodechildren-\u4e3a\u6570\u7ec4\u60c5\u5f62\u3011"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h3",props:{"aria-hidden":!0,href:"#\u6570\u636e\u7ed3\u6784\u3010\u4ec5\u8003\u8651-vnodechildren-\u4e3a\u6570\u7ec4\u60c5\u5f62\u3011"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u6570\u636e\u7ed3\u6784\u3010\u4ec5\u8003\u8651 vnode.children \u4e3a\u6570\u7ec4\u60c5\u5f62\u3011"),r.a.createElement(o.MDXTag,{name:"p",components:n},"  A, B, C, D \u4e3a\u540c\u4e00\u5c42\u7ea7 vnode"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  cur vnode.children: [ A, B, [ C@Ckey ], D@DKey ]\n  pre vnode.children: [ A, B, [ E@Ekey, C@Ckey ], D@key ]")),r.a.createElement(o.MDXTag,{name:"h3",components:n,props:{id:"diff"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h3",props:{"aria-hidden":!0,href:"#diff"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"diff"),r.a.createElement(o.MDXTag,{name:"h4",components:n,props:{id:"react-v15"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h4",props:{"aria-hidden":!0,href:"#react-v15"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"React v15.*"),r.a.createElement(o.MDXTag,{name:"h5",components:n,props:{id:"\u6982\u8ff0"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h5",props:{"aria-hidden":!0,href:"#\u6982\u8ff0"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u6982\u8ff0"),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u987a\u5e8f\uff0c\u540c\u4e00\u5c42\u7ea7\u4e0b key \u76f8\u540c\u7684 vnode \u8fdb\u884c diff\u3002"),r.a.createElement(o.MDXTag,{name:"h5",components:n,props:{id:"\u5982\u4f55\u751f\u6210\u552f\u4e00\u7684-key\uff1f"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h5",props:{"aria-hidden":!0,href:"#\u5982\u4f55\u751f\u6210\u552f\u4e00\u7684-key\uff1f"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u5982\u4f55\u751f\u6210\u552f\u4e00\u7684 key\uff1f"),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u5f53 children \u7684\u67d0\u4e2a vnode \u662f\u6570\u7ec4\u7684\u65f6\u5019\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u5c42\u7ea7\u524d\u7f00\uff0c\u53d6\u503c\u4e3a\uff1a"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  (\u5411\u4e0a\u7ee7\u627f\u7684\u5c42\u7ea7\u524d\u7f00\u3010\u591a\u4e2a\u6570\u7ec4\u5d4c\u5957\u3011 || '.') + (vnode \u7684 key || vnode \u5728 children \u4e2d\u7684\u7d22\u5f15)")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u5982\u4e0b\uff0cchildren \u5185\u7b2c\u4e00\u4e2a vnode \u7c7b\u578b\u4e3a\u6570\u7ec4\uff0c\u5219\u8be5\u6570\u7ec4\u5185\u6240\u6709 vnode \u7684 key \u5c06\u83b7\u5f97\u4e00\u4e2a '.0' \u524d\u7f00\u52a0\u6210:"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  children: [[A, B, C@ckey], D, E@ekey]\n    =>\n  .0")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u76f8\u5e94\u7684 key \u53d6\u503c\u662f\uff1a"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  A .0:0\n  B .0:1\n  C .0:ckey")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u5176\u4ed6\u975e\u6570\u7ec4\u7c7b\u578b vnode key \u7684\u53d6\u503c\u5219\u662f\uff1a"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"(\u5411\u4e0a\u7ee7\u627f\u7684\u5c42\u7ea7\u524d\u7f00\u3010\u591a\u4e2a\u6570\u7ec4\u5d4c\u5957\u3011 || '.') + (vnode \u7684 key || vnode \u5728 children \u4e2d\u7684\u7d22\u5f15)")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u5373:"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  D: .1\n  E: .ekey\n")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u4f8b\u5982\u201c\u6570\u636e\u7ed3\u6784\u201d\u7684\u5c42\u7ea7\u7ed3\u6784\uff0c\u751f\u6210 key \u6700\u7ec8\u662f:"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"  cur [ '.0', '.1', '.2:Ckey', '.DKey'] \n  pre [ '.0', '.1', '.2:0', '.2:Ckey', '.Dkey' ]")),r.a.createElement(o.MDXTag,{name:"h5",components:n,props:{id:"\u6700\u7ec8-diff-\u6d41\u7a0b\uff1a"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h5",props:{"aria-hidden":!0,href:"#\u6700\u7ec8-diff-\u6d41\u7a0b\uff1a"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u6700\u7ec8 diff \u6d41\u7a0b\uff1a"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"    cur vnode children [ A, B, [ C@Ckey ], D@DKey, E@EKey ]\n    pre vnode children [ A, B, [ E@Ekey, C@Ckey ], D@key ]      =>\n    A : A diff \u66f4\u65b0\n    B : B diff \u66f4\u65b0\n    C@Ckey : C@Ckey diff \u66f4\u65b0\n    D@Dkey : D@Dkey diff \u66f4\u65b0\n    E@EKey :        diff \u521b\u5efa\u65b0\u7684\n      =>\n           : E@Ekey \u7b49\u672a diff \u5230\u7684 vnode \u76f4\u63a5 unmount\n")),r.a.createElement(o.MDXTag,{name:"h4",components:n,props:{id:"react-v1642"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h4",props:{"aria-hidden":!0,href:"#react-v1642"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"React v16.4.2"),r.a.createElement(o.MDXTag,{name:"p",components:n},"v16 \u7684 diff \u6709\u8f83\u5927\u7684\u8c03\u6574\u3002"),r.a.createElement(o.MDXTag,{name:"h5",components:n,props:{id:"vnode-\u6570\u636e\u7ed3\u6784"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h5",props:{"aria-hidden":!0,href:"#vnode-\u6570\u636e\u7ed3\u6784"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"vnode \u6570\u636e\u7ed3\u6784"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  vnode: FiberNode\n  {\n    ...\n    alternate: \u955c\u50cf\n    child: \u7b2c\u4e00\u4e2a\u5b69\u5b50\u8282\u70b9\n    return: \u7236\u8282\u70b9\n    sibling: \u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9\n    tag: \u7c7b\u578b\n    ...\n  }\n")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u6b64\u5916\uff0c\u5bf9\u4e8e\u6570\u7ec4:"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  vnode.children [[ A, B ], C, D]")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  ","[A, B]","\u4f1a\u76f4\u63a5\u5bf9\u5e94\u4e00\u4e2a\u771f\u5b9e\u7684 tag \u4e3a \u7684Fragment\u301010\u3011\u7684 FiberNode \u5b9e\u4f8b\u3010\u8be5\u8bbe\u8ba1\u8ba9\u7ec4\u4ef6\u652f\u6301\u8fd4\u56de\u6570\u7ec4\u3011:"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"  [\n    FiberNode  {\n      ...\n      tag: 10\n      child: A FiberNode\n      ...\n    },\n    FiberNode {\n      ...\n      type: C\n      ...\n    },\n    FiberNode {\n      ...\n      type: D\n      ...\n    }\n  ]\n")),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u8be5 FiberNode \u5b9e\u4f8b\u5c06\u7528\u5728\u5f53\u524d\u5c42\u7ea7\u7684 diff\uff0c\u8be5 FiberNode diff \u4e4b\u540e\u7acb\u5373\u5bf9\u5176\u5b50 vnode\u3010A, B\u3011\u8fed\u4ee3 diff\u3002"),r.a.createElement(o.MDXTag,{name:"p",components:n},"  \u5176 diff \u6d41\u7a0b\u3010\u89c1 reconcileChildrenArray\u3011\uff1a"),r.a.createElement(o.MDXTag,{name:"ol",components:n},r.a.createElement(o.MDXTag,{name:"li",components:n,parentName:"ol"},"\u6309\u7167\u7d22\u5f15\u3010index\u3011\u987a\u5e8f\u8fdb\u884c diff\uff0c\u8c03\u7528 updateSlot\uff0c\u8be5\u65b9\u6cd5\u5728\u7d22\u5f15\u5339\u914d\u4f46 key \u4e0d\u5339\u914d\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9\u7d22\u5f15 diff \u5faa\u73af\u4e2d\u65ad"),r.a.createElement(o.MDXTag,{name:"li",components:n,parentName:"ol"},"curChildren.length <= preChildren.length ? \u7ed3\u675f diff : \u7ee7\u7eed"),r.a.createElement(o.MDXTag,{name:"li",components:n,parentName:"ol"},"preChild","[oldFiber]"," \u4e0d\u5b58\u5728 \uff1f \u65b0\u5efa\uff0c\u7ed3\u675f diff : \u7ee7\u7eed"),r.a.createElement(o.MDXTag,{name:"li",components:n,parentName:"ol"},"mapRemainingChildren && updateFromMap\uff0ckey \u4e00\u81f4\u7684 FiberNode diff"),r.a.createElement(o.MDXTag,{name:"li",components:n,parentName:"ol"},"\u5584\u540e")),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},"  // \u7b2c\u4e00\u8f6e\n  cur vnode children [ A, B, [ C@Ckey ], D@DKey, E@EKey ]\n  pre vnode children [ A, B, [ E@Ekey, C@Ckey ], D@key ]\n    =>\n  A : A diff \u66f4\u65b0\n  B : B diff \u66f4\u65b0\n  FragmentFiberNode: FragmentFiberNode diff \u66f4\u65b0\n  C@Ckey : C@Ckey diff \u66f4\u65b0\n         : E@Ekey \u7b49\u672a diff \u5230\u7684 vnode \u76f4\u63a5 unmount  D@Dkey : D@Dkey diff \u66f4\u65b0\n  E@EKey :        diff \u521b\u5efa\u65b0\u7684\n")),r.a.createElement(o.MDXTag,{name:"h2",components:n,props:{id:"\u4ee5\u4f8b\u8bd5\u6cd5"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h2",props:{"aria-hidden":!0,href:"#\u4ee5\u4f8b\u8bd5\u6cd5"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u4ee5\u4f8b\u8bd5\u6cd5"),r.a.createElement(o.MDXTag,{name:"p",components:n},"\u793a\u4f8b\u4e2d\uff0c\u5404\u60c5\u5f62\uff0c\u5206\u522b\u5bf9\u5e94\u5f53\u524d diff \u7684\u865a\u62df\u8282\u70b9","[\u5bf9\u5e94\u7ec4\u4ef6 ParentA, ParentB, ParentC, ParentD]"," children \u957f\u5ea6\u662f\u5426\u53d8\u5316\u53ca children \u5185\u6bcf\u4e2a vnode \u662f\u5426\u6709 key \u5c5e\u6027\u3002"),r.a.createElement(o.MDXTag,{name:"p",components:n},"\u70b9\u51fb\u201c\u5237\u65b0\u201d\u6309\u94ae\u4f1a\u89e6\u53d1 Parent* \u7ec4\u4ef6 rerender\uff1a"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre"},"Component* create \u610f\u5473\u7740\u91cd\u65b0\u521b\u5efa\u4e86\u7ec4\u4ef6 Component* \u7684\u5b9e\u4f8b [WillUnmount => DidMount]\nComponent* update \u5219\u610f\u5473\u7740\u4ec5\u89e6\u53d1 Component* \u7684\u66f4\u65b0 [WillReceiveProps => DidUpdate]")),r.a.createElement(o.MDXTag,{name:"h3",components:n,props:{id:"no-key"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h3",props:{"aria-hidden":!0,href:"#no-key"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"no key"),r.a.createElement(c.d,{__position:0,__code:"<ParentA />\n<hr />\n<ParentB />\n<hr />\n<ParentC />",__scope:{props:a,ParentA:D,ParentB:C,ParentC:T,ParentD:M,ParentE:X,ParentF:v,ParentG:b}},r.a.createElement(D,null),r.a.createElement("hr",null),r.a.createElement(C,null),r.a.createElement("hr",null),r.a.createElement(T,null)),r.a.createElement(o.MDXTag,{name:"h3",components:n,props:{id:"\u5f15\u5165-key"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h3",props:{"aria-hidden":!0,href:"#\u5f15\u5165-key"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u5f15\u5165 key"),r.a.createElement(c.d,{__position:1,__code:"<ParentD />",__scope:{props:a,ParentA:D,ParentB:C,ParentC:T,ParentD:M,ParentE:X,ParentF:v,ParentG:b}},r.a.createElement(M,null)),r.a.createElement(o.MDXTag,{name:"h3",components:n,props:{id:"\u66f4\u590d\u6742\u7684\u7ed3\u6784"}},r.a.createElement(o.MDXTag,{name:"a",components:n,parentName:"h3",props:{"aria-hidden":!0,href:"#\u66f4\u590d\u6742\u7684\u7ed3\u6784"}},r.a.createElement(o.MDXTag,{name:"span",components:n,parentName:"a",props:{className:"icon-link"}},"#")),"\u66f4\u590d\u6742\u7684\u7ed3\u6784"),r.a.createElement(c.d,{__position:2,__code:"<ParentE />\n<hr />",__scope:{props:a,ParentA:D,ParentB:C,ParentC:T,ParentD:M,ParentE:X,ParentF:v,ParentG:b}},r.a.createElement(X,null),r.a.createElement("hr",null)),r.a.createElement(o.MDXTag,{name:"p",components:n},"\u6e90\u7801"),r.a.createElement(o.MDXTag,{name:"pre",components:n},r.a.createElement(o.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-jsx"}},'  render() {\n    const { flag } = this.state;\n    return (\n      <div>\n        <h4>\n          children \u957f\u5ea6\u4e0d\u53d8\u4e14\u6bcf\u4e2a child \u5177\u6709 key \u5c5e\u6027\u4e14\u6700\u540e\u4e00\u4e2a child \u7ed3\u6784\u53d8\u5316\n        </h4>\n        <button onClick={() => this.setState({ flag: !flag })}>\u5237\u65b0</button>\n        <pre>\n          pre children: [A@key, B@key,    C@key ]<br />\n          now children: [A@key, B@key, [ C@key ]]\n        </pre>\n        <ComponentA key="A" />\n        <ComponentB key="B" />\n        {\n          flag ? [\n            <ComponentC key="C" />\n          ] : (\n            <ComponentC key="C" />\n          )\n        }\n      </div>\n    );\n  }\n')))}}}]);